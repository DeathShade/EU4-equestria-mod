namespace = pony

# list of event IDs :
# 1 : doesn't exist for some reason. I guess I planned to do something with it once upon a time in a farway land, but know I have no idea. Edit : I think it was supposed to be an intro event. I'll make two of these, one for Equestria and one for Pegasia. (version 4)
# 2 : selenite reformation
# 3, 4 : spread of the reformation when religion is celestian (pony.8 if selenite)
# 5 : activates Crystal cores
# 6 : changes culture in provinces with crystal cores to crystal ponies
# 7 : asks the player if they want to change to Lunar Republic
# 8 : spread of the reformation when religion is selenite (added in version 3)
# 9 : follow-up to pony.7, asking if the player would prefer an aggressive or a tolerant approach (added in version 5)
# 10 : an end to the selenite disaster if the player is Celestian (added in version 5)
# 11 : a much quicker end to said disaster if the player is Selenite (added in version 5)

# #############################################################################################################################

# The Selenite reformation. Yay, originality. Let us call it "Luna's Appeal", rather. It will attract cloppers.

country_event = {
	id = pony.2
	title = "pony.EVTNAME2"
	desc = "pony.EVTDESC2"
	picture = RELIGION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { is_religion_enabled = selenite }
		religion = celestian
		war_exhaustion = 10
	}
	
	mean_time_to_happen = {
		days = 7
	}
	
	option = {
		name = "pony.EVTOPTA2"
		enable_religion = selenite
		random_owned_province = {
			change_religion = selenite
		}
		set_country_flag = "selenite_reformation_flag" 
	}
}

# Spread of Luna's Appeal

province_event = {
	id = pony.3
	title = "pony.EVTNAME3"
	desc = "pony.EVTDESC3"
	picture = RELIGION_eventPicture
	
	trigger = {
		is_religion_enabled = selenite
		religion = celestian
		owner = {
			NOT = { has_country_flag = capital_at_canterlot }
			religion = celestian
		}
	}
	
	mean_time_to_happen = {
		years = 500
		
		modifier = {
			factor = 0.70
			any_neighbor_province = {
					religion = selenite
				}
		}
		modifier = {
			factor = 0.1 #yup, drastic
			owner = {
				has_country_flag = selenite_reformation_flag
			}
		}
	}
	option = {
		name = "pony.EVTOPTA3"
		change_religion = selenite
		add_province_modifier = {
			name = "religious_zeal_at_conv"
			duration = 7000
		}
	}
}
	
# Same but not in Canterlot if Canterlot has been built (yes, past me was too lazy for if/else structures)
province_event = {
	id = pony.4
	title = "pony.EVTNAME3"
	desc = "pony.EVTDESC3"
	picture = RELIGION_eventPicture
	
	trigger = {
		is_religion_enabled = selenite
		religion = celestian
		owner = {
			has_country_flag = capital_at_canterlot
			religion = celestian
		}
		NOT = { 
			province_id = 953 # Canterlot
		}
		
	}
	
	mean_time_to_happen = {
		years = 500
		
		modifier = {
			factor = 0.70
			any_neighbor_province = {
					religion = selenite
				}
		}
		modifier = {
			factor = 0.1 #yup, drastic
			owner = {
				has_country_flag = selenite_reformation_flag
			}
		}
	}
	
	option = {
		name = "pony.EVTOPTA3"
		change_religion = selenite
		add_province_modifier = {
			name = "religious_zeal_at_conv"
			duration = 7000
		}
	}
}

# Same if religion is selenite

province_event = {
	id = pony.8
	title = "pony.EVTNAME8"
	desc = "pony.EVTDESC8"
	picture = RELIGION_eventPicture
	
	trigger = {
		is_religion_enabled = selenite
		religion = celestian
		owner = {
			religion = selenite
			NOT = { has_country_flag = capital_at_canterlot }
		}
	}
	
	mean_time_to_happen = {
		years = 500
		
		modifier = {
			factor = 0.70
			any_neighbor_province = {
					religion = selenite
				}
		}
	}
	option = {
		name = "pony.EVTOPTA8"
		change_religion = selenite
		add_province_modifier = {
			name = "religious_zeal_at_conv"
			duration = 7000
		}
	}
}

# event that asks the player if they want to change for Lunar Republic
country_event = {
	id = pony.7
	title = "pony.EVTNAME7"
	desc = "pony.EVTDESC7"
	picture = RELIGION_eventPicture
	
	trigger = {
		government = celestian_enlightenment
		is_religion_enabled = selenite
		religion = celestian
		has_country_flag = selenite_reformation_flag
		NOT = { has_country_flag = refused_selenite_conversion" }
	}
	
	mean_time_to_happen = {
		months = 6
	}
	
	option = {
		name = "pony.EVTOPTA7"
		change_government = lunar_republic
		change_religion = selenite
		add_stability = 1
		end_disaster = selenite_reformation
		
	}
	option = {
		name = "pony.EVTOPTB7"
		add_stability = -3
		set_country_flag = "refused_selenite_conversion"
	}
}

# follow-up to pony.7 : we refused to convert.. Let's wreck their asses or get all tolerant
country_event = {
	id = pony.9
	title = "pony.EVTNAME9"
	desc = "pony.EVTDESC9"
	picture = RELIGION_eventPicture
	
	trigger = {
		government = celestian_enlightenment
		is_religion_enabled = selenite
		religion = celestian
		has_country_flag = refused_selenite_conversion
		NOT = { has_country_modifier = war_on_luna }
		NOT = { has_country_modifier = tolerance_on_luna }
		
	}
	
	mean_time_to_happen = {
		months = 6
	}
	
	option = {
		name = "pony.EVTOPTA9"
		add_country_modifier = war_on_luna
		
	}
	option = {
		name = "pony.EVTOPTB9"
		add_country_modifier = tolerance_on_luna
	}
}

# ending the selenite_reformation disaster as celestian
country_event = {
	id = pony.10
	title = "pony.EVTNAME10"
	desc = "pony.EVTDESC10"
	picture = RELIGION_eventPicture
	
	trigger = {
		government = celestian_enlightenment
		is_religion_enabled = selenite
		religion = celestian
		has_country_flag = selenite_reformation_flag
		OR = {
			has_country_modifier = war_on_luna
			has_country_modifier = tolerance_on_luna
		}
		religious_unity = 0.8 
	}
	
	mean_time_to_happen = {
		years = 15
	}
	
	option = {
		name = "pony.EVTOPTA10"
		remove_country_modifier = war_on_luna
		remove_country_modifier = tolerance_on_luna
		clr_country_flag = refused_selenite_conversion
		clr_country_flag = selenite_reformation_flag
		end_disaster = selenite_reformation
		add_stability = 3
	}
}

# you decided to convert to Selenite. Not fun.
country_event = {
	id = pony.11
	title = "pony.EVTNAME11"
	desc = "pony.EVTDESC11"
	picture = RELIGION_eventPicture
	
	trigger = {
		government = celestian_enlightenment
		is_religion_enabled = selenite
		religion = selenite
		has_country_flag = selenite_reformation_flag
	}
	
	mean_time_to_happen = {
		months = 6
	}
	
	option = {
		name = "pony.EVTOPTA11"
		remove_country_modifier = war_on_luna
		remove_country_modifier = tolerance_on_luna
		clr_country_flag = refused_selenite_conversion
		clr_country_flag = selenite_reformation_flag
		end_disaster = selenite_reformation
		add_stability = 3
	}
}

# #############################################################################################################

country_event = {
	id = pony.5
	title = "pony.EVTNAME5"
	desc = "pony.EVTDESC5"
	picture = ANGRY_MOB_eventPicture
	fire_only_once = yes
	trigger = {
		NOT = { exists = EQL }
		NOT = { has_country_flag = crystal_revolution }
		
		is_year = 1650
		
		OR = {
			tag = EQC
			tag = EQE
			tag = EQN
			tag = EQP
			tag = EQU
		}
		
		northern_america = {
			is_core = ROOT
		}
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = "pony.EVTOPTA5"
		set_country_flag = crystal_revolution
		
		northern_america = {
			add_core = EQL
		}
		
	}
	
}

# pony provinces with Crystal cores get their culture changed

province_event = {
	id = pony.6
	title = "pony.EVTNAME6"
	desc = "pony.EVTDESC6"
	picture = ANGRY_MOB_eventPicture
	
	trigger = {
		owner = { has_country_flag = crystal_revolution }
		is_core = EQL
	}
	
	mean_time_to_happen = {
		months = 100
		
		modifier = {
			factor = 0.70
			any_neighbor_province = {
					culture = crystal
				}
		}
	}
	
	option = {
		name = "pony.EVTOPTA6"
		change_culture = crystal
		add_province_modifier = {
				name = "rebel_sentiment"
				duration = 3650
		}
	}
}
